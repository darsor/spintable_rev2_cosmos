SCREEN AUTO AUTO 0.02

HORIZONTAL
	VERTICAL

		TITLE "SPINTABLE command/telemetry overview"
		
		HORIZONTAL
			VERTICAL
				VERTICALBOX
					SECTIONHEADER "IMU 1 telemetry"
					
					LABELVALUE SENSORS IMU1 GYRO_X
					LABELVALUE SENSORS IMU1 GYRO_Y
					LABELVALUE SENSORS IMU1 GYRO_Z
					LABELVALUE SENSORS IMU1 ACCEL_X
					LABELVALUE SENSORS IMU1 ACCEL_Y
					LABELVALUE SENSORS IMU1 ACCEL_Z
					LABELVALUE SENSORS IMU1 MAG_X
					LABELVALUE SENSORS IMU1 MAG_Y
					LABELVALUE SENSORS IMU1 MAG_Z
					LABELVALUE SENSORS IMU1 TIMESTAMP RAW
				END
				
				VERTICALBOX
					SECTIONHEADER "IMU 1 commands"
					
					LABEL "Gyroscope full-scale resolution"
					HORIZONTAL
						NAMED_WIDGET IMU1_GYRO_RES COMBOBOX "125 dps" "245 dps" "500 dps" "1000 dps" "2000 dps"
						BUTTON 'Set' 'cmd("SENSORS GYRO_RES with IMU 1, RESOLUTION \'#{get_named_widget("IMU1_GYRO_RES").text}\'")'
					END
					
					LABEL "Accelerometer full-scale resolution"
					HORIZONTAL
						NAMED_WIDGET IMU1_ACCEL_RES COMBOBOX "+/- 2 g" "+/- 4 g" "+/- 8 g" "+/- 16 g"
						BUTTON 'Set' 'cmd("SENSORS ACCEL_RES with IMU 1, RESOLUTION \'#{get_named_widget("IMU1_ACCEL_RES").text}\'")'
					END
					
					BUTTON 'Reset IMU 1' 'cmd("SENSORS RESET_IMU with IMU 1")'
				END
				
				VERTICALBOX
					SECTIONHEADER "CAMERA telemetry"
					LABELVALUE SENSORS CAMERA RECEIVED_COUNT CONVERTED 8
				END
				
				VERTICALBOX
					SECTIONHEADER "CAMERA commands"
					BUTTON "Enable Camera" 'cmd("SENSORS CAMERA_STATE with STATE ON")'
					BUTTON "Disable Camera" 'cmd("SENSORS CAMERA_STATE with STATE OFF")'
				END
			END
			
			TABBOOK
			
				TABITEM "X-axes"
			
					MATRIXBYCOLUMNS 2
						LABEL "IMU 1"
						LABEL "IMU 2"
						TIMEGRAPH SENSORS IMU1 GYRO_X 60 300 200 2 SYSTIME
						TIMEGRAPH SENSORS IMU2 GYRO_X 60 300 200 2 SYSTIME

						TIMEGRAPH SENSORS IMU1 ACCEL_X 60 300 200 2 SYSTIME
						TIMEGRAPH SENSORS IMU2 ACCEL_X 60 300 200 2 SYSTIME

						TIMEGRAPH SENSORS IMU1 MAG_X 60 300 200 2 SYSTIME
						TIMEGRAPH SENSORS IMU2 MAG_X 60 300 200 2 SYSTIME
					END
				
				END
				
				TABITEM "Y-axes"
			
					MATRIXBYCOLUMNS 2
						LABEL "IMU 1"
						LABEL "IMU 2"
						TIMEGRAPH SENSORS IMU1 GYRO_Y 60 300 200 2 SYSTIME
						TIMEGRAPH SENSORS IMU2 GYRO_Y 60 300 200 2 SYSTIME
						
						TIMEGRAPH SENSORS IMU1 ACCEL_Y 60 300 200 2 SYSTIME
						TIMEGRAPH SENSORS IMU2 ACCEL_Y 60 300 200 2 SYSTIME
						
						TIMEGRAPH SENSORS IMU1 MAG_Y 60 300 200 2 SYSTIME
						TIMEGRAPH SENSORS IMU2 MAG_Y 60 300 200 2 SYSTIME
					END
				
				END
				
				TABITEM "Z-axes"
			
					MATRIXBYCOLUMNS 2
						LABEL "IMU 1"
						LABEL "IMU 2"
						TIMEGRAPH SENSORS IMU1 GYRO_Z 60 300 200 2 SYSTIME
						TIMEGRAPH SENSORS IMU2 GYRO_Z 60 300 200 2 SYSTIME

						TIMEGRAPH SENSORS IMU1 ACCEL_Z 60 300 200 2 SYSTIME
						TIMEGRAPH SENSORS IMU2 ACCEL_Z 60 300 200 2 SYSTIME

						TIMEGRAPH SENSORS IMU1 MAG_Z 60 300 200 2 SYSTIME
						TIMEGRAPH SENSORS IMU2 MAG_Z 60 300 200 2 SYSTIME
					END
				
				END
			
			END
			
			VERTICAL
				VERTICALBOX
					SECTIONHEADER "IMU 2 telemetry"
					
					LABELVALUE SENSORS IMU2 GYRO_X
					LABELVALUE SENSORS IMU2 GYRO_Y
					LABELVALUE SENSORS IMU2 GYRO_Z
					LABELVALUE SENSORS IMU2 ACCEL_X
					LABELVALUE SENSORS IMU2 ACCEL_Y
					LABELVALUE SENSORS IMU2 ACCEL_Z
					LABELVALUE SENSORS IMU2 MAG_X
					LABELVALUE SENSORS IMU2 MAG_Y
					LABELVALUE SENSORS IMU2 MAG_Z
					LABELVALUE SENSORS IMU2 TIMESTAMP RAW
				END
				
				VERTICALBOX
					SECTIONHEADER "IMU 2 commands"
					
					LABEL "Gyroscope full-scale resolution"
					HORIZONTAL
						NAMED_WIDGET IMU2_GYRO_RES COMBOBOX "125 dps" "245 dps" "500 dps" "1000 dps" "2000 dps"
						BUTTON 'Set' 'cmd("SENSORS GYRO_RES with IMU 2, RESOLUTION \'#{get_named_widget("IMU2_GYRO_RES").text}\'")'
					END
					
					LABEL "Accelerometer full-scale resolution"
					HORIZONTAL
						NAMED_WIDGET IMU2_ACCEL_RES COMBOBOX "+/- 2 g" "+/- 4 g" "+/- 8 g" "+/- 16 g"
						BUTTON 'Set' 'cmd("SENSORS ACCEL_RES with IMU 2, RESOLUTION \'#{get_named_widget("IMU2_ACCEL_RES").text}\'")'
					END
					
					BUTTON 'Reset IMU 2' 'cmd("SENSORS RESET_IMU with IMU 2")'
				END
				
				VERTICALBOX
					SECTIONHEADER "COSMOS commands"
					BUTTON 'Enable Logging' 'cmd("COSMOS STARTLOGGING")'
					BUTTON 'Disable Logging' 'cmd("COSMOS STOPLOGGING")'
				END
			END
		END
		
		HORIZONTAL
		
			VERTICALBOX
				SECTIONHEADER "MOTOR commands"
				
				MATRIXBYCOLUMNS 3
					LABEL "Speed:"
					NAMED_WIDGET speed TEXTFIELD
					BUTTON "Send" 'cmd("MOTOR SPEED with SPEED #{get_named_widget("speed").text.to_f}")'
					
					LABEL "Absolute position:"
					NAMED_WIDGET abs_position TEXTFIELD
					BUTTON "Send" 'cmd("MOTOR ABS_POSITION with POSITION #{get_named_widget("abs_position").text.to_f}")'
					
					LABEL "Relative position:"
					NAMED_WIDGET rev_position TEXTFIELD
					BUTTON "Send" 'cmd("MOTOR REV_POSITION with POSITION #{get_named_widget("rev_position").text.to_f}")'
					
					BUTTON "Set Home" 'cmd("MOTOR SET_HOME")'
					BUTTON "Go to Index" 'cmd("MOTOR GOTO_INDEX")'
				END
			END
			
			VERTICALBOX
				SECTIONHEADER "MOTOR telemetry"
				
				LABELVALUE MOTOR ENCODER SPEED WITH_UNITS 15
				LABELVALUE MOTOR ENCODER POSITION WITH_UNITS 15
				LABELVALUE MOTOR ENCODER REV_CNT CONVERTED 15
				LABELVALUE MOTOR ENCODER RAW_CNT RAW 15
			END
			
			TIMEGRAPH MOTOR ENCODER SPEED 60 300 200 2 SYSTIME
			
			CANVAS 200 200
				CANVASLINE 0 0 199 0
				CANVASLINE 199 0 199 199
				CANVASLINE 199 199 0 199
				CANVASLINE 0 199 0 0
				CANVASLINE 99 1 99 198 white
				CANVASLINE 1 99 198 99 white
				CANVASDOT 100 100 red
				CANVASLABEL 86 16 "180"
				CANVASLABEL 1 104 "90"
				CANVASLABEL 95 196 "0"
				CANVASLABEL 172 104 "270"
				CANVASDOT '90*Math.sin(-tlm_variable("MOTOR ENCODER POSITION", :CONVERTED)*(3.141/180))+100' '90*Math.cos(-tlm_variable("MOTOR ENCODER POSITION", :CONVERTED)*(3.141/180))+100' red
			END
		
		END
	END
	
	VERTICAL
		
	END
END