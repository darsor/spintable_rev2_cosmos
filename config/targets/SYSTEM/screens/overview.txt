SCREEN AUTO AUTO .02

VERTICAL

	TITLE "SPINTABLE command/telemetry overview"
	
	HORIZONTAL
		VERTICALBOX
			SECTIONHEADER "IMU 1 telemetry"
			
			LABELVALUE SENSORS IMU1 GYRO_X RAW
			LABELVALUE SENSORS IMU1 GYRO_Y RAW
			LABELVALUE SENSORS IMU1 GYRO_Z RAW
			LABELVALUE SENSORS IMU1 ACCEL_X RAW
			LABELVALUE SENSORS IMU1 ACCEL_Y RAW
			LABELVALUE SENSORS IMU1 ACCEL_Z RAW
			LABELVALUE SENSORS IMU1 MAG_X RAW
			LABELVALUE SENSORS IMU1 MAG_Y RAW
			LABELVALUE SENSORS IMU1 MAG_Z RAW
			LABELVALUE SENSORS IMU1 TIMESTAMP RAW
		END
		
		TABBOOK
		
			TABITEM "X-axes"
		
				MATRIXBYCOLUMNS 2
					LABEL "IMU 1"
					LABEL "IMU 2"
					TIMEGRAPH SENSORS IMU1 GYRO_X 100 300 200 2 TIMESTAMP RAW
					TIMEGRAPH SENSORS IMU2 GYRO_X 100 300 200 2 TIMESTAMP RAW
					
					TIMEGRAPH SENSORS IMU1 ACCEL_X 100 300 200 2 TIMESTAMP RAW
					TIMEGRAPH SENSORS IMU2 ACCEL_X 100 300 200 2 TIMESTAMP RAW
					
					TIMEGRAPH SENSORS IMU1 MAG_X 100 300 200 2 TIMESTAMP RAW
					TIMEGRAPH SENSORS IMU2 MAG_X 100 300 200 2 TIMESTAMP RAW
				END
			
			END
			
			TABITEM "Y-axes"
		
				MATRIXBYCOLUMNS 2
					LABEL "IMU 1"
					LABEL "IMU 2"
					TIMEGRAPH SENSORS IMU1 GYRO_Y 100 300 200 2 TIMESTAMP RAW
					TIMEGRAPH SENSORS IMU2 GYRO_Y 100 300 200 2 TIMESTAMP RAW
					
					TIMEGRAPH SENSORS IMU1 ACCEL_Y 100 300 200 2 TIMESTAMP RAW
					TIMEGRAPH SENSORS IMU2 ACCEL_Y 100 300 200 2 TIMESTAMP RAW
					
					TIMEGRAPH SENSORS IMU1 MAG_Y 100 300 200 2 TIMESTAMP RAW
					TIMEGRAPH SENSORS IMU2 MAG_Y 100 300 200 2 TIMESTAMP RAW
				END
			
			END
			
			TABITEM "Z-axes"
		
				MATRIXBYCOLUMNS 2
					LABEL "IMU 1"
					LABEL "IMU 2"
					TIMEGRAPH SENSORS IMU1 GYRO_Z 100 300 200 2 TIMESTAMP RAW
					TIMEGRAPH SENSORS IMU2 GYRO_Z 100 300 200 2 TIMESTAMP RAW
					
					TIMEGRAPH SENSORS IMU1 ACCEL_Z 100 300 200 2 TIMESTAMP RAW
					TIMEGRAPH SENSORS IMU2 ACCEL_Z 100 300 200 2 TIMESTAMP RAW
					
					TIMEGRAPH SENSORS IMU1 MAG_Z 100 300 200 2 TIMESTAMP RAW
					TIMEGRAPH SENSORS IMU2 MAG_Z 100 300 200 2 TIMESTAMP RAW
				END
			
			END
		
		END
			
		VERTICALBOX
			SECTIONHEADER "IMU 2 telemetry"
			
			LABELVALUE SENSORS IMU2 GYRO_X RAW
			LABELVALUE SENSORS IMU2 GYRO_Y RAW
			LABELVALUE SENSORS IMU2 GYRO_Z RAW
			LABELVALUE SENSORS IMU2 ACCEL_X RAW
			LABELVALUE SENSORS IMU2 ACCEL_Y RAW
			LABELVALUE SENSORS IMU2 ACCEL_Z RAW
			LABELVALUE SENSORS IMU2 MAG_X RAW
			LABELVALUE SENSORS IMU2 MAG_Y RAW
			LABELVALUE SENSORS IMU2 MAG_Z RAW
			LABELVALUE SENSORS IMU2 TIMESTAMP RAW
		END
	END
	
	HORIZONTAL
	
		MATRIXBYCOLUMNS 3
			LABEL "Speed:"
			NAMED_WIDGET speed TEXTFIELD
			BUTTON "Send" 'cmd("MOTOR SPEED with SPEED #{get_named_widget("speed").text.to_f}")'
			
			LABEL "Absolute position:"
			NAMED_WIDGET abs_position TEXTFIELD
			BUTTON "Send" 'cmd("MOTOR ABS_POSITION with POSITION #{get_named_widget("abs_position").text.to_f}")'
			
			LABEL "Relative position:"
			NAMED_WIDGET rev_position TEXTFIELD
			BUTTON "Send" 'cmd("MOTOR REV_POSITION with POSITION #{get_named_widget("rev_position").text.to_f}")'
			
			BUTTON "Set Home" 'cmd("MOTOR SET_HOME")'
			BUTTON "Go to Index" 'cmd("MOTOR GOTO_INDEX")'
		END
		
		VERTICALBOX
			SECTIONHEADER "MOTOR telemetry"
			
			LABELVALUE MOTOR ENCODER SPEED CONVERTED
			LABELVALUE MOTOR ENCODER POSITION CONVERTED
			LABELVALUE MOTOR ENCODER REV_CNT RAW
			LABELVALUE MOTOR ENCODER RAW_CNT RAW
		END
		
		LINEGRAPH MOTOR ENCODER SPEED 60
		
		CANVAS 200 200
			CANVASLINE 0 0 199 0
			CANVASLINE 199 0 199 199
			CANVASLINE 199 199 0 199
			CANVASLINE 0 199 0 0
			CANVASLINE 99 1 99 198 white
			CANVASLINE 1 99 198 99 white
			CANVASDOT 100 100 red
			CANVASLABEL 86 16 "180"
			CANVASLABEL 1 104 "90"
			CANVASLABEL 95 196 "0"
			CANVASLABEL 172 104 "270"
			CANVASDOT '90*Math.sin(-tlm_variable("MOTOR ENCODER POSITION", :RAW)*(3.141/180))+100' '90*Math.cos(-tlm_variable("MOTOR ENCODER POSITION", :RAW)*(3.141/180))+100' red
		END
	
	END
END